_cat := root.externalresource.add(Category, id := 'categoryResourcesDeploy', name := 'ConfigFlow', description := 'a451feff-a8e3-4dc5-8410-61cf1e47fa01', ownership := list(u.epeterson, u.hemmingr))
_apir := _cat.add(APIResource, id := 'cf', name := 'ConfigFlow', ownership := list(u.hemmingr))
_apir.add(APIEndpoint, id := '603', name := 'stats', endpointName := 'stats', advancedMode := true, expression := '\/\/myTemplateCategory := SELECT templateCategory\n\/\/myCustomProperty := SELECT customProperty\n\/\/mySharedWeb := SELECT sharedWeb\n\/\/myUnknown := SELECT unknown\n\/\/myServiceAccount := SELECT serviceAccount\n\/\/myExternalResource := SELECT externalResource\n\/\/myDefaults := SELECT defaults\n\/\/myAccessProfile := SELECT accessProfile\n\/\/myRoot := SELECT root\n\nmyOrganisation := SELECT organisation \/\/ORGANISATION\nmyNode := SELECT node \/\/NODE\nmyNodeType := SELECT nodeType \/\/NODETYPE\nmyUser := SELECT user \/\/USER\nmyGroup := SELECT group \/\/GROUP\nmyNodeDataImport := SELECT nodeDataImport \/\/NODEDATAIMPORT\nmyCustomPeriod := SELECT customPeriod \/\/CUSTOM_PERIOD\nmyActionPlan := SELECT actionPlan \/\/ACTIONPLAN\nmyClassConfig := SELECT classConfig \/\/CLASSCONFIG\nmyCevendor := SELECT ceVendor \/\/CEVEN\nmyCetask := SELECT ceTask \/\/CETAS\nmyCecomment := SELECT ceComment \/\/CECOM\nmyCeincident := SELECT ceIncident \/\/CEINC\nmyCeprocedure := SELECT ceProcedure \/\/CEPRO\nmyCepolicy := SELECT cePolicy \/\/CEPOL\nmyCecontrolmeasure := SELECT ceControlMeasure \/\/CECM\nmyCeissue := SELECT ceIssue \/\/CEISS\nmyCeasset := SELECT ceAsset \/\/CEASS\nmyCeservice := SELECT ceService \/\/CESER\nmyCecontract := SELECT ceContract \/\/CECOT\nmyCeproject := SELECT ceProject \/\/CEPRJ\nmyCeregulation := SELECT ceRegulation \/\/CEREG\nmyCecompliancerequirement := SELECT ceComplianceRequirement \/\/CECOR\nmyCeindicator := SELECT ceIndicator \/\/CEIND\nmyCeattachment := SELECT ceAttachment \/\/CEATT\nmyCeriskassessment := SELECT ceRiskAssessment \/\/CERAS\nmyAccessPolicy := SELECT accessPolicy \/\/ACPOL\nmyRole := SELECT role \/\/ROLE\nmyCeproduct := SELECT ceProduct \/\/CEPRD\nmyCeprescreening := SELECT cePreScreening \/\/CEPSC\nmyCeprivacy := SELECT cePrivacy \/\/CEPRV\nmyCeworkflow := SELECT ceWorkflow \/\/CEWFL\nmyCedist := SELECT ceDistribution \/\/CEDIS\nmyCeinquiry := SELECT ceInquiry \/\/CEINQ\nmyCequestionnaire := SELECT ceQuestionnaire \/\/CEQST\nmyCedpia := SELECT ceDpia \/\/CEDPI\nmyCetia := SELECT ceTia \/\/CETIA\nmyCeassuranceactivity := SELECT ceAssuranceActivity \/\/CEASA\n\nmyStats := createtable(\'idspace\', \'num\')\n .addrow(\'ORGANISATION\', myOrganisation.size()) \/\/ORGANISATION\n .addrow(\'NODE\', myNode.size()) \/\/NODE\n .addrow(\'NODETYPE\', myNodeType.size()) \/\/NODETYPE\n .addrow(\'USER\', myUser.size()) \/\/USER\n .addrow(\'GROUP\', myGroup.size()) \/\/GROUP\n .addrow(\'NODEDATAIMPORT\', myNodeDataImport.size()) \/\/NODEDATAIMPORT\n .addrow(\'CUSTOM_PERIOD\', myCustomPeriod.size()) \/\/CUSTOM_PERIOD\n .addrow(\'ACTIONPLAN\', myActionPlan.size()) \/\/ACTIONPLAN\n .addrow(\'CLASSCONFIG\', myClassConfig.size()) \/\/CLASSCONFIG\n .addrow(\'CEVEN\', myCevendor.size()) \/\/CEVEN\n .addrow(\'CETAS\', myCetask.size()) \/\/CETAS\n .addrow(\'CECOM\', myCecomment.size()) \/\/CECOM\n .addrow(\'CEINC\', myCeincident.size()) \/\/CEINC\n .addrow(\'CEPRO\', myCeprocedure.size()) \/\/CEPRO\n .addrow(\'CEPOL\', myCepolicy.size()) \/\/CEPOL\n .addrow(\'CECM\', myCecontrolmeasure.size()) \/\/CECM\n .addrow(\'CEISS\', myCeissue.size()) \/\/CEISS\n .addrow(\'CEASS\', myCeasset.size()) \/\/CEASS\n .addrow(\'CESER\', myCeservice.size()) \/\/CESER\n .addrow(\'CECOT\', myCecontract.size()) \/\/CECOT\n .addrow(\'CEPRJ\', myCeproject.size()) \/\/CEPRJ\n .addrow(\'CEREG\', myCeregulation.size()) \/\/CEREG\n .addrow(\'CECOR\', myCecompliancerequirement.size()) \/\/CECOR\n .addrow(\'CEIND\', myCeindicator.size()) \/\/CEIND\n .addrow(\'CEATT\', myCeattachment.size()) \/\/CEATT\n .addrow(\'CERAS\', myCeriskassessment.size()) \/\/CERAS\n .addrow(\'ACPOL\', myAccessPolicy.size()) \/\/ACPOL\n .addrow(\'ROLE\', myRole.size()) \/\/ROLE\n .addrow(\'CEPRD\', myCeproduct.size()) \/\/CEPRD\n .addrow(\'CEPSC\', myCeprescreening.size()) \/\/CEPSC\n .addrow(\'CEPRV\', myCeprivacy.size()) \/\/CEPRV\n .addrow(\'CEWFL\', myCeworkflow.size()) \/\/CEWFL\n .addrow(\'CEDIS\', myCedist.size()) \/\/CEDIS\n .addrow(\'CEINQ\', myCeinquiry.size()) \/\/CEINQ\n .addrow(\'CEQST\', myCequestionnaire.size()) \/\/CEQST\n .addrow(\'CEDPI\', myCedpia.size()) \/\/CEDPI\n .addrow(\'CETIA\', myCetia.size()) \/\/CETIA\n .addrow(\'CEASA\', myCeassuranceactivity.size()) \/\/CEASA\n')
_apir.add(APIEndpoint, id := '731', name := 'group', endpointName := 'group', advancedMode := true, table := t.177178, expression := 'root.group.children.table()\n .addColumn(\'id\',id).addColumn(\'exp\', output(self.generate(true).strip))')
_apir.add(APIEndpoint, id := '696', name := 'user', endpointName := 'user', advancedMode := true, table := t.177178, expression := 'root.user.children.filter(propRelease  \'\').table()\n .addColumn(\'id\',id).addColumn(\'exp\', output(self.generate(true).strip))\n .addColumn(\'hash\',password + \'\')')
_apir.add(APIEndpoint, id := '695', name := 'enterprisetask', endpointName := 'enterprisetask', advancedMode := true, table := t.177178, expression := 'enterpriseTasks := SELECT cetask where id  \'108\'\nenterpriseTasks.first(3).table(id).addColumn(\'exp\', output(self.generate(true)))')
_apir.add(APIEndpoint, id := '669', name := 'property', endpointName := 'property', advancedMode := true, table := t.177178, expression := 'root.property.children.filter(className != \'SystemMethodConfig\').first(2)\n .table(id).addColumn(\'exp\', output(self.generate(true)))')
_apir.add(APIEndpoint, id := '666', name := 'enterprisetemplate', endpointName := 'enterprisetemplate', advancedMode := true, table := t.177178, expression := '\/\/enterpriseTemplates := SELECT EnterpriseTemplate FROM root where id = \'entIndTemplate_v1\' or id = \'189\' or id = \'entTaskTemplate\' or id = \'1616\' or id = \'DefaultEnterpriseTemplate\'\/\/or id = \'39685\'\nenterpriseTemplates := SELECT EnterpriseTemplate FROM root where id  \'39685\' and id  \'PE8390\' and id  \'entReg\'\/\/and id  \'oldTemplate\' and id  \'DefaultEnterpriseTemplate\' and id  \'draftTemplate\'\n\/\/myTest := enterpriseTemplates.reverse()\nenterpriseTemplates.first(5).table(id).addColumn(\'exp\', self.generate(true))')
_apir.add(APIEndpoint, id := '1540', name := 'logs', endpointName := 'logs', advancedMode := true, expression := 't.logConfigFlow.children.table(id,name,job,status,summary,date)\n .addColumn(\'content\', \n self.genedit(content).foreach(row:\n row.substring(row.indexOf(\';\') + 12,row.size()-14)\n )\n )')
_apir.add(APIEndpoint, id := '601', name := 'POST - Push', endpointName := 'pusha', endpointMethod := 'POST', bodyType := 'JSON', expression := 'myExp := \'\'\n\nt.expressionTest.clear(expression)\n\nIF body.pushtype = \'plugin\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ELSE IF body.pushtype = \'script\' THEN\n myExp := body.exp\n ELSE IF body.pushtype = \'user\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ENDIF\n ENDIF\nENDIF\nt.expressionTest.expression := myExp\n\/\/t.expressionTest.expression', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"pushtype\": {\n \"type\": \"string\"\n },\n \"expressions\": {\n \"type\": \"array\",\n \"items\": {\n \"type\": \"object\",\n \"properties\": {\n \"id\": {\n \"type\": \"string\"\n },\n \"exp\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"id\",\n \"exp\"\n ]\n }\n }\n },\n \"required\": [\n \"pushtype\",\n \"expressions\"\n ]\n}', readAccessors := list(u.apiuser))
_apir.add(APIEndpoint, id := '602', name := 'POST - Plugin', endpointName := 'plugina', endpointMethod := 'POST', bodyType := 'JSON', expression := 'myExp := \'\'\n\nt.expressionTest.clear(expression)\n\nIF body.pushtype = \'plugin\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ELSE IF body.pushtype = \'script\' THEN\n myExp := body.exp\n ELSE IF body.pushtype = \'user\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ENDIF\n ENDIF\nENDIF\nt.expressionTest.expression := myExp\n\/\/t.expressionTest.expression', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"pushtype\": {\n \"type\": \"string\"\n },\n \"expressions\": {\n \"type\": \"array\",\n \"items\": {\n \"type\": \"object\",\n \"properties\": {\n \"id\": {\n \"type\": \"number\"\n },\n \"exp\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"id\",\n \"exp\"\n ]\n }\n }\n },\n \"required\": [\n \"pushtype\",\n \"expressions\"\n ]\n}', readAccessors := list(u.apiuser))
_apir.add(APIClientAuthentication, id := '654', clientId := '20ea04b4b90b0944ba6a11c3b86a84', user := u.apiuser, constrained := true)
_apir.add(LogFolder, id := 'logConfigFlow')
_apir1 := _cat.add(APIResource, id := 'Control', name := 'control', description := 'Receive commands', readAccessors := list(u.apiuser))
_apir1.add(APIEndpoint, id := '140', name := 'POST - Push', endpointName := 'push', endpointMethod := 'POST', bodyType := 'JSON', expression := 'myExp := \'\'\n\nt.expressionTest.clear(expression)\n\nIF body.pushtype = \'plugin\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ELSE IF body.pushtype = \'script\' THEN\n myExp := body.exp\n ELSE IF body.pushtype = \'user\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ENDIF\n ENDIF\nENDIF\nt.expressionTest.expression := myExp\n\/\/t.expressionTest.expression', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"pushtype\": {\n \"type\": \"string\"\n },\n \"expressions\": {\n \"type\": \"array\",\n \"items\": {\n \"type\": \"object\",\n \"properties\": {\n \"id\": {\n \"type\": \"string\"\n },\n \"exp\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"id\",\n \"exp\"\n ]\n }\n }\n },\n \"required\": [\n \"pushtype\",\n \"expressions\"\n ]\n}', readAccessors := list(u.apiuser))
_apir1.add(APIEndpoint, id := '719', name := 'POST - Plugin', endpointName := 'plugin', endpointMethod := 'POST', bodyType := 'JSON', expression := 'myExp := \'\'\n\nt.expressionTest.clear(expression)\n\nIF body.pushtype = \'plugin\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ELSE IF body.pushtype = \'script\' THEN\n myExp := body.exp\n ELSE IF body.pushtype = \'user\' THEN\n body.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n )\n ENDIF\n ENDIF\nENDIF\nt.expressionTest.expression := myExp\n\/\/t.expressionTest.expression', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"pushtype\": {\n \"type\": \"string\"\n },\n \"expressions\": {\n \"type\": \"array\",\n \"items\": {\n \"type\": \"object\",\n \"properties\": {\n \"id\": {\n \"type\": \"number\"\n },\n \"exp\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"id\",\n \"exp\"\n ]\n }\n }\n },\n \"required\": [\n \"pushtype\",\n \"expressions\"\n ]\n}', readAccessors := list(u.apiuser))
_apir1.add(LogFolder, id := 'logDeploy', detailedLogging := true)