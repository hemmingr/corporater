_cat := root.externalresource.add(Category, id := 'categoryResourcesDeploy', name := 'CorporaterFlow', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01')
_apir := _cat.add(APIResource, id := 'cf', name := 'CorporaterFlow', description := 'scriptpackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01')
_apie := _apir.add(APIEndpoint, id := 'endpointData', name := 'data', description := 'scriptpackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'data', advancedMode := true, bodyType := 'JSON', expression := 'myTable := createTable(\'result\')\nIF idspace.isMissing() THEN\n myTable.addrow(\'error\')\n \/\/error(\'hemming\')\nELSE\n IF idspace = \'cetask\' THEN\n myObjects := SELECT cetask\n ENDIF\n IF idspace = \'ceproject\' THEN\n myObjects := SELECT ceproject\n ENDIF\n IF idspace = \'organisation\' THEN\n myObjects := SELECT ORGANISATION\n ENDIF\n IF idspace = \'node\' THEN\n myObjects := SELECT NODE\n ENDIF\n IF idspace = \'nodetype\' THEN\n myObjects := SELECT NODETYPE\n ENDIF\n IF idspace = \'templatecategory\' THEN\n myObjects := SELECT TEMPLATECATEGORY\n ENDIF\n IF idspace = \'user\' THEN\n myObjects := SELECT USER\n ENDIF\n IF idspace = \'group\' THEN\n myObjects := SELECT GROUP\n ENDIF\n IF idspace = \'nodedataimport\' THEN\n myObjects := SELECT NODEDATAIMPORT\n ENDIF\n IF idspace = \'custom_period\' THEN\n myObjects := SELECT CUSTOM_PERIOD\n ENDIF\n IF idspace = \'externalresource\' THEN\n myObjects := SELECT EXTERNALRESOURCE\n ENDIF\n IF idspace = \'actionplan\' THEN\n myObjects := SELECT ACTIONPLAN\n ENDIF\n IF idspace = \'accessprofile\' THEN\n myObjects := SELECT ACCESSPROFILE\n ENDIF\n IF idspace = \'classconfig\' THEN\n myObjects := SELECT CLASSCONFIG\n ENDIF\n IF idspace = \'cevendor\' THEN\n myObjects := SELECT CEVENDOR\n ENDIF\n IF idspace = \'cetask\' THEN\n myObjects := SELECT CETASK\n ENDIF\n IF idspace = \'cecomment\' THEN\n myObjects := SELECT CECOMMENT\n ENDIF\n IF idspace = \'ceincident\' THEN\n myObjects := SELECT CEINCIDENT\n ENDIF\n IF idspace = \'ceprocedure\' THEN\n myObjects := SELECT CEPROCEDURE\n ENDIF\n IF idspace = \'cepolicy\' THEN\n myObjects := SELECT CEPOLICY\n ENDIF\n IF idspace = \'cecontrolmeasure\' THEN\n myObjects := SELECT CECONTROLMEASURE\n ENDIF\n IF idspace = \'ceissue\' THEN\n myObjects := SELECT CEISSUE\n ENDIF\n IF idspace = \'ceasset\' THEN\n myObjects := SELECT CEASSET\n ENDIF\n IF idspace = \'ceservice\' THEN\n myObjects := SELECT CESERVICE\n ENDIF\n IF idspace = \'cecontract\' THEN\n myObjects := SELECT CECONTRACT\n ENDIF\n IF idspace = \'ceproject\' THEN\n myObjects := SELECT CEPROJECT\n ENDIF\n IF idspace = \'ceregulation\' THEN\n myObjects := SELECT CEREGULATION\n ENDIF\n IF idspace = \'cecompliancerequirement\' THEN\n myObjects := SELECT CECOMPLIANCEREQUIREMENT\n ENDIF\n IF idspace = \'ceindicator\' THEN\n myObjects := SELECT CEINDICATOR\n ENDIF\n IF idspace = \'ceattachment\' THEN\n myObjects := SELECT CEATTACHMENT\n ENDIF\n IF idspace = \'ceriskassessment\' THEN\n myObjects := SELECT CERISKASSESSMENT\n ENDIF\n IF idspace = \'accesspolicy\' THEN\n myObjects := SELECT ACCESSPOLICY\n ENDIF\n IF idspace = \'role\' THEN\n myObjects := SELECT ROLE\n ENDIF\n IF idspace = \'ceproduct\' THEN\n myObjects := SELECT CEPRODUCT\n ENDIF\n IF idspace = \'serviceaccount\' THEN\n myObjects := SELECT SERVICEACCOUNT\n ENDIF\n IF idspace = \'ceprescreening\' THEN\n myObjects := SELECT CEPRESCREENING\n ENDIF\n IF idspace = \'ceprivacy\' THEN\n myObjects := SELECT CEPRIVACY\n ENDIF\n IF idspace = \'ceworkflow\' THEN\n myObjects := SELECT CEWORKFLOW\n ENDIF\n IF idspace = \'cedistribution\' THEN\n myObjects := SELECT CEDISTRIBUTION\n ENDIF\n IF idspace = \'ceinquiry\' THEN\n myObjects := SELECT CEINQUIRY\n ENDIF\n IF idspace = \'cequestionnaire\' THEN\n myObjects := SELECT CEQUESTIONNAIRE\n ENDIF\n IF idspace = \'cedpia\' THEN\n myObjects := SELECT CEDPIA\n ENDIF\n IF idspace = \'cetia\' THEN\n myObjects := SELECT CETIA\n ENDIF\n IF idspace = \'ceassuranceactivity\' THEN\n myObjects := SELECT CEASSURANCEACTIVITY\n ENDIF\n IF idspace = \'enterprisetemplate\' THEN\n myObjects := SELECT EnterpriseTemplate FROM root\n ENDIF\n IF idspace = \'user\' THEN\n myObjects := SELECT USER\n ENDIF\n IF idspace = \'property\' THEN\n myObjects := root.property.children.filter(className != \'SystemMethodConfig\')\n ENDIF\n IF idspace = \'group\' THEN\n myObjects := SELECT GROUP\n ENDIF\nENDIF\n\nIF idspace.isMissing() THEN\n myTable\nELSE IF idspace = \'user\' THEN\n myObjects.table()\n .addColumn(\'id\', self.id)\n .addColumn(\'rid\', self.rid) \n .addColumn(\'exp\', output(self.generate(true).strip))\n .addColumn(\'lastmodifiedDate\',self.lastModifiedDate-0)\n .addColumn(\'hash\', password + \'\')\nELSE\n myObjects.table()\n .addColumn(\'id\', self.id)\n .addColumn(\'rid\', self.rid) \n .addColumn(\'exp\', output(self.generate(true).strip))\n .addColumn(\'lastmodifieddate\',self.lastModifiedDate-0) \nENDIF\n', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"object\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"object\"\n ]\n}', readAccessors := list(u.apiuser))
_apie.add(EndpointParameter, id := 'parameteridspace', name := 'idspace', key := 'idspace', mandatory := true)
_apie1 := _apir.add(APIEndpoint, id := 'endpointScriptPackage', name := 'scriptpackage', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'scriptpackage', advancedMode := true, expression := 'myScriptPackage := SELECT category WHERE description = \'scriptPackage_\' + keyuuid\nmyScriptPackage.table().addColumn(\'exp\', output(self.generate(true)))\n')
_apie1.add(EndpointParameter, id := 'parameterUUID', name := 'uuid', key := 'keyuuid', mandatory := true)
_apir.add(APIEndpoint, id := 'endpointPush', name := 'push', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'push', endpointMethod := 'POST', bodyType := 'JSON', expression := 'myExp := \'\'\n\nt.expressionCF.clear(expression)\n\nbody.expressions.foreach(row:\n myExp := myExp + row.exp + \'\\n\'\n) \nt.expressionCF.expression := myExp\n\/\/t.expressionCF.expression', jsonBodySchema := '{\n \"$schema\": \"http:\/\/json-schema.org\/draft-07\/schema#\",\n \"title\": \"Generated schema for Root\",\n \"type\": \"object\",\n \"properties\": {\n \"pushtype\": {\n \"type\": \"string\"\n },\n \"expressions\": {\n \"type\": \"array\",\n \"items\": {\n \"type\": \"object\",\n \"properties\": {\n \"id\": {\n \"type\": \"string\"\n },\n \"exp\": {\n \"type\": \"string\"\n }\n },\n \"required\": [\n \"exp\"\n ]\n }\n }\n },\n \"required\": [\n \"expressions\"\n ]\n}', readAccessors := list(u.apiuser))
_apir.add(APIEndpoint, id := 'endpointStats', name := 'stats', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'stats', advancedMode := true, expression := '\/\/myAccessProfiles := SELECT accessProfile\n\/\/myRoots := SELECT root\n\nmyVersion := root.version\nmyAccessProfiles := root.accessprofile.children()\nmyAPIresources := SELECT APIresource\nmyEnterpriseTemplates := SELECT EnterpriseTemplate FROM root\nmyProperties := root.property.children.filter(className != \'SystemMethodConfig\')\nmyOrganisations := SELECT organisation \/\/ORGANISATION\nmyNodes := SELECT node \/\/NODE\nmyNodeTypes := SELECT nodeType \/\/NODETYPE\nmyUsers := SELECT user \/\/USER\nmyGroups := SELECT group \/\/GROUP\nmyNodeDataImports := SELECT nodeDataImport \/\/NODEDATAIMPORT\nmyCustomPeriods := SELECT customPeriod \/\/CUSTOM_PERIOD\nmyActionPlans := SELECT actionPlan \/\/ACTIONPLAN\nmyClassConfigs := SELECT classConfig \/\/CLASSCONFIG\nmyCevendors := SELECT ceVendor \/\/CEVEN\nmyCetasks := SELECT ceTask \/\/CETAS\nmyCecomments := SELECT ceComment \/\/CECOM\nmyCeincidents := SELECT ceIncident \/\/CEINC\nmyCeprocedures := SELECT ceProcedure \/\/CEPRO\nmyCepolicies := SELECT cePolicy \/\/CEPOL\nmyCecontrolmeasures := SELECT ceControlMeasure \/\/CECM\nmyCeissues := SELECT ceIssue \/\/CEISS\nmyCeassets := SELECT ceAsset \/\/CEASS\nmyCeservices := SELECT ceService \/\/CESER\nmyCecontracts := SELECT ceContract \/\/CECOT\nmyCeprojects := SELECT ceProject \/\/CEPRJ\nmyCeregulations := SELECT ceRegulation \/\/CEREG\nmyCecompliancerequirements := SELECT ceComplianceRequirement \/\/CECOR\nmyCeindicators := SELECT ceIndicator \/\/CEIND\nmyCeattachments := SELECT ceAttachment \/\/CEATT\nmyCeriskassessments := SELECT ceRiskAssessment \/\/CERAS\nmyAccessPolicies := SELECT accessPolicy \/\/ACPOL\nmyRoles := SELECT role \/\/ROLE\nmyCeproducts := SELECT ceProduct \/\/CEPRD\nmyCeprescreenings := SELECT cePreScreening \/\/CEPSC\nmyCeprivacies := SELECT cePrivacy \/\/CEPRV\nmyCeworkflows := SELECT ceWorkflow \/\/CEWFL\nmyCedists := SELECT ceDistribution \/\/CEDIS\nmyCeinquiries := SELECT ceInquiry \/\/CEINQ\nmyCequestionnaires := SELECT ceQuestionnaire \/\/CEQST\nmyCedpias := SELECT ceDpia \/\/CEDPI\nmyCetias := SELECT ceTia \/\/CETIA\nmyCeassuranceactivities := SELECT ceAssuranceActivity \/\/CEASA\nmyStats := createtable(\'idspace\', \'num\', \'lastupdated\')\n .addrow(\'ENTERPRISETEMPLATE\', myEnterpriseTemplates.size(), myEnterpriseTemplates.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'ACCESSPROFILE\', myAccessProfiles.size(), myAccessProfiles.sortreverse(lastModifiedDate).first().lastModifiedDate - 0) \n .addrow(\'ORGANISATION\', myOrganisations.size(), myOrganisations.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'NODE\', myNodes.size(), myNodes.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'NODETYPE\', myNodeTypes.size(), myNodeTypes.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'USER\', myUsers.size(), myUsers.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'GROUP\', myGroups.size(), myGroups.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'NODEDATAIMPORT\', myNodeDataImports.size(), myNodeDataImports.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CUSTOM_PERIOD\', myCustomPeriods.size(), myCustomPeriods.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'ACTIONPLAN\', myActionPlans.size(), myActionPlans.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CLASSCONFIG\', myClassConfigs.size(), myClassConfigs.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEVEN\', myCevendors.size(), myCevendors.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CETAS\', myCetasks.size(), myCetasks.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CECOM\', myCecomments.size(), myCecomments.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEINC\', myCeincidents.size(), myCeincidents.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPRO\', myCeprocedures.size(), myCeprocedures.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPOL\', myCepolicies.size(), myCepolicies.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CECM\', myCecontrolmeasures.size(), myCecontrolmeasures.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEISS\', myCeissues.size(), myCeissues.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEASS\', myCeassets.size(), myCeassets.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CESER\', myCeservices.size(), myCeservices.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CECOT\', myCecontracts.size(), myCecontracts.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPRJ\', myCeprojects.size(), myCeprojects.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEREG\', myCeregulations.size(), myCeregulations.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CECOR\', myCecompliancerequirements.size(), myCecompliancerequirements.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEIND\', myCeindicators.size(), myCeindicators.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEATT\', myCeattachments.size(), myCeattachments.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CERAS\', myCeriskassessments.size(), myCeriskassessments.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'ACPOL\', myAccessPolicies.size(), myAccessPolicies.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'ROLE\', myRoles.size(), myRoles.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPRD\', myCeproducts.size(), myCeproducts.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPSC\', myCeprescreenings.size(), myCeprescreenings.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEPRV\', myCeprivacies.size(), myCeprivacies.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEWFL\', myCeworkflows.size(), myCeworkflows.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEDIS\', myCedists.size(), myCedists.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEINQ\', myCeinquiries.size(), myCeinquiries.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEQST\', myCequestionnaires.size(), myCequestionnaires.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEDPI\', myCedpias.size(), myCedpias.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CETIA\', myCetias.size(), myCetias.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n .addrow(\'CEASA\', myCeassuranceactivities.size(), myCeassuranceactivities.sortreverse(lastModifiedDate).first().lastModifiedDate - 0)\n')
_apir.add(APIEndpoint, id := 'endpointLogs', name := 'logs', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'logs', advancedMode := true, expression := 't.logConfigFlow.children.table(id,name,job,status,summary,date)\n .addColumn(\'content\', \n self.genedit(content).foreach(row:\n row.substring(row.indexOf(\';\') + 12,row.size()-14)\n )\n )')
_apir.add(APIClientAuthentication, id := 'clientAuthentication', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', clientId := '20ea04b4b90b0944ba6a11c3b86a84', user := u.apiuser, constrained := true)
_apir.add(LogFolder, id := 'logConfigFlow', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01')
_apir.add(APIEndpoint, id := 'endpointGroup', name := 'group', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'group', advancedMode := true, expression := 'root.group.children.table()\n .addColumn(\'rid\',rid).addColumn(\'id\',id).addColumn(\'exp\', output(self.generate(true).strip))')
_apir.add(APIEndpoint, id := 'endpointUser', name := 'user', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'user', advancedMode := true, expression := 'root.user.children.filter(propRelease  \'\').table()\n .addColumn(\'id\',id).addColumn(\'exp\', output(self.generate(true).strip))\n .addColumn(\'hash\',password + \'\')')
_apir.add(APIEndpoint, id := 'endpointEnterprisetask', name := 'enterprisetask', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'enterprisetask', advancedMode := true, expression := 'enterpriseTasks := SELECT cetask where _file = MISSING \nenterpriseTasks.table(id,rid).addColumn(\'exp\', output(self.generate(true).strip()))')
_apir.add(APIEndpoint, id := 'endpointProperty', name := 'property', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'property', advancedMode := true, expression := 'root.property.children.filter(className != \'SystemMethodConfig\')\n .table(id,rid).addColumn(\'exp\', output(self.generate(true).strip()))')
_apir.add(APIEndpoint, id := 'endpointEnterprisetemplate', name := 'enterprisetemplate', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'enterprisetemplate', advancedMode := true, expression := 'enterpriseTemplates := SELECT EnterpriseTemplate FROM root\nenterpriseTemplates.table(id,rid).addColumn(\'exp\', output(self.generate(true).strip()))\n')
_apir.add(APIEndpoint, id := '683', name := 'organisation', description := 'scriptPackage_a451feff-a8e3-4dc5-8410-61cf1e47fa01', endpointName := 'organisation', advancedMode := true, expression := 'json(\'{\\\"name\\\":\\\"test\\\"}\')')
_cat.add(FileResource, id := '604', name := 'a.txt', content := 'a.txt;text/plain;H4sIAAAAAAAA/0sEAEO+t+gBAAAA', date := 2024-10-21)